import{Q as V,ao as x,ap as A,aq as I,p as E,K as L,e as T,a3 as D,c as R,a7 as K,k as i,l as y,_ as q,n,q as p,x as t,B as l,D as f,F as _,y as c,O as v,z as C}from"./index.d55d2dc8.js";import{u as G}from"./userStore.c3d2e3a8.js";import{c as H,a as d}from"./VRow.abd81b15.js";import{l as Q,o as W,p as S,V as h}from"./VCol.d48916d9.js";import{f as J,c as b,e as M,g as X}from"./VSelect.1be7b96a.js";import{h as Y,S as Z,j as k}from"./VBtn.9bb2eadf.js";const ee=async e=>{const o=V();return await x.post(`${A}/user_criterios`,e,{headers:{Authorization:o.getToken,"Access-Control-Allow-Origin":I}}).then(r=>{}).catch(r=>({error:r.message}))},oe=async()=>{const e=V();return await x.get(`${A}/user_criterios`,{headers:{Authorization:e.getToken,"Access-Control-Allow-Origin":I}}).then(o=>o.data).catch(o=>({error:o.message}))};const se=E({...Q(),...L(J(),["inline"])},"v-checkbox"),ie=T()({name:"VCheckbox",inheritAttrs:!1,props:se(),emits:{"update:focused":e=>!0},setup(e,o){let{attrs:r,slots:a}=o;const{isFocused:g,focus:m,blur:s}=W(e),u=D(),O=R(()=>e.id||`checkbox-${u}`);return Y(()=>{const[B,P]=K(r),[U,pe]=S.filterProps(e),[j,fe]=b.filterProps(e);return i(S,y({class:["v-checkbox",e.class]},B,U,{id:O.value,focused:g.value,style:e.style}),{...a,default:w=>{let{id:F,messagesId:$,isDisabled:N,isReadonly:z}=w;return i(b,y(j,{id:F.value,"aria-describedby":$.value,disabled:N.value,readonly:z.value},P,{onFocus:m,onBlur:s}),a)}})}),{}}}),te={name:"CriteriosPage",data:function(){return{hasCriterios:G(),selecionado:null,criteriosBox:["Esfor\xE7o","Per\xEDodo","Tempo Conclus\xE3o","Experi\xEAncia","Avalia\xE7\xE3o de Usu\xE1rios"],criteriosSelecionados:[],comparisons:{},comparisonOnLoad:!1}},watch:{criteriosSelecionados(){this.criterioSelecionado(),this.removeComparisonsNotUsed(),this.loadComparasions()}},async mounted(){this.comparisons=await oe(),Object.keys(this.comparisons).length>0&&(this.comparisonOnLoad=!0,this.mount_comparisons())},methods:{mount_comparisons(){for(const e in this.comparisons)this.criteriosSelecionados.push(e);this.criterioSelecionado(),this.removeComparisonsNotUsed(),this.loadComparasions()},criterioSelecionado(){!this.selecionado&&this.criteriosSelecionados&&(this.selecionado=this.criteriosSelecionados[0]),!this.criteriosSelecionados.includes(this.selecionado)&&this.criteriosSelecionados&&(this.selecionado=this.criteriosSelecionados[0])},verify_button_activate(){if(!(this.criteriosSelecionados.length<=1))for(let e in this.comparisons)for(let o=0;o<this.comparisons[e].length&&this.comparisons[e].value;o++);},removeComparisonsNotUsed(){for(let e in this.comparisons){for(let o=0;o<this.comparisons[e].length;o++)Object.values(this.criteriosSelecionados).includes(this.comparisons[e][o].criterio)||this.comparisons[e].splice(o,1);Object.values(this.criteriosSelecionados).includes(e)||delete this.comparisons[e]}},loadComparasions(){for(let e=0;e<this.criteriosSelecionados.length;e++){this.comparisons[this.criteriosSelecionados[e]]||(this.comparisons[this.criteriosSelecionados[e]]=[]);for(let o=0;o<this.criteriosSelecionados.length;o++)if(e!==o){let r=!1;for(let a=0;a<this.comparisons[this.criteriosSelecionados[e]].length;a++)if(this.criteriosSelecionados[o]==this.comparisons[this.criteriosSelecionados[e]][a].criterio){r=!0;break}r||this.comparisons[this.criteriosSelecionados[e]].push({criterio:this.criteriosSelecionados[o],value:null})}}},verificarCamposVazios(){if(this.criteriosSelecionados.length==0)return alert("Favor definir seus crit\xE9rios!"),!1;if(this.criteriosSelecionados.length==1)return alert("Favor selecionar outro crit\xE9rio!"),!1;for(let e in this.comparisons){let o=this.comparisons[e];for(let r=0;r<o.length;r++){let a=o[r];if(a.value===null)return alert(`O campo "${e} -> ${a.criterio}" est\xE1 vazio!`),!1}}return!0},submitCriterios(){this.verificarCamposVazios()&&(alert("Crit\xE9rios salvo com sucesso"),ee(this.comparisons),this.hasCriterios.setCriterios(!0))}}},re=c("h2",null,"Criterios",-1),ae=c("br",null,null,-1),ne=c("br",null,null,-1),le=c("br",null,null,-1),ce=c("br",null,null,-1),ue=c("br",null,null,-1),de={key:0},he={key:1};function me(e,o,r,a,g,m){return n(),p(H,null,{default:t(()=>[i(d,{style:{height:"700px"}},{default:t(()=>[i(h,{cols:"3"},{default:t(()=>[re,ae,ne,(n(!0),l(_,null,f(this.criteriosBox,s=>(n(),p(d,{style:{padding:"0"},key:s,id:s},{default:t(()=>[i(ie,{label:s,value:s,modelValue:e.criteriosSelecionados,"onUpdate:modelValue":o[0]||(o[0]=u=>e.criteriosSelecionados=u)},null,8,["label","value","modelValue"])]),_:2},1032,["id"]))),128))]),_:1}),i(M,{vertical:"",thickness:1}),i(h,{cols:"9"},{default:t(()=>[i(d,{style:{display:"flex","justify-content":"center","text-align":"center"}},{default:t(()=>[i(Z,{modelValue:e.selecionado,"onUpdate:modelValue":o[1]||(o[1]=s=>e.selecionado=s),color:"primary",mandatory:""},{default:t(()=>[(n(!0),l(_,null,f(e.criteriosSelecionados,s=>(n(),p(k,{key:s,value:s},{default:t(()=>[v(C(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),le,ce,ue,(n(!0),l(_,null,f(this.comparisons[e.selecionado],s=>(n(),l("li",{key:s},[i(d,{style:{display:"flex","justify-content":"center","text-align":"center"}},{default:t(()=>[i(h,null,{default:t(()=>[v(C(e.selecionado),1)]),_:1}),i(h,null,{default:t(()=>[i(X,{label:"Escolha a Import\xE2ncia",items:["Import\xE2ncia igual","Import\xE2ncia moderada","Import\xE2ncia forte","Import\xE2ncia muito forte","Import\xE2ncia extrema"],modelValue:s.value,"onUpdate:modelValue":u=>s.value=u,onChange:m.verify_button_activate},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),i(h,null,{default:t(()=>[v(C(s.criterio),1)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),i(d,{style:{"justify-content":"center"}},{default:t(()=>[i(k,{onClick:m.submitCriterios,color:"green"},{default:t(()=>[e.comparisonOnLoad?(n(),l("span",he,"Editar")):(n(),l("span",de,"Salvar"))]),_:1},8,["onClick"])]),_:1})]),_:1})}const be=q(te,[["render",me]]);export{be as default};
